PREFIX?=/usr/local
LIBDIR = $(PREFIX)/lib/
INCDIR = $(PREFIX)/include/

OSNAME = $(shell uname)

CC = gcc
CXX = g++
AR = ar
RM = rm
INSTALL = install
CPPFLAGS = -Wall -Werror -I $(INCDIR) -std=c++0x -DDEBUG -DDIAGNOSTIC -g -fPIC
#CPPFLAGS = -Wall -Werror -I $(INCDIR) -std=c++0x -O2 -g -fPIC
LDFLAGS += -lcfmdrv
LDFLAGS += -lriakdrv++
LDFLAGS += -lcr_class
LDFLAGS += -lprotobuf
LDFLAGS += `pkg-config --libs liblzma`
LDFLAGS += -lsnappy
ifeq ($(OSNAME), Linux)
LDFLAGS += -lrt
endif

SOURCES_TEST0 = test0.cc
OBJECTS_TEST0 = $(SOURCES_TEST0:.cc=.o)

SOURCES_TEST1 = test1.cc
OBJECTS_TEST1 = $(SOURCES_TEST1:.cc=.o)

SOURCES_TEST2 = test2.cc
OBJECTS_TEST2 = $(SOURCES_TEST2:.cc=.o)

SOURCES_TEST3 = test3.cc
OBJECTS_TEST3 = $(SOURCES_TEST3:.cc=.o)

SOURCES_TEST4 = test4.cc
OBJECTS_TEST4 = $(SOURCES_TEST4:.cc=.o)

SOURCES_TEST5 = test5.cc
OBJECTS_TEST5 = $(SOURCES_TEST5:.cc=.o)

SOURCES_TEST6 = test6.cc
OBJECTS_TEST6 = $(SOURCES_TEST6:.cc=.o)

SOURCES_TEST7 = test7.cc
OBJECTS_TEST7 = $(SOURCES_TEST7:.cc=.o)

SOURCES_TEST8 = test8.cc
OBJECTS_TEST8 = $(SOURCES_TEST8:.cc=.o)

SOURCES_TEST9 = test9.cc
OBJECTS_TEST9 = $(SOURCES_TEST9:.cc=.o)

SOURCES_TEST10 = test10.cc
OBJECTS_TEST10 = $(SOURCES_TEST10:.cc=.o)

SOURCES_TEST11 = test11.cc
OBJECTS_TEST11 = $(SOURCES_TEST11:.cc=.o)

SOURCES_TEST12 = test12.cc
OBJECTS_TEST12 = $(SOURCES_TEST12:.cc=.o)

SOURCES_TEST13 = test13.cc
OBJECTS_TEST13 = $(SOURCES_TEST13:.cc=.o)

SOURCES_TEST14 = test14.cc
OBJECTS_TEST14 = $(SOURCES_TEST14:.cc=.o)

SOURCES_TEST15 = test15.cc
OBJECTS_TEST15 = $(SOURCES_TEST15:.cc=.o)

SOURCES_TEST16 = test16.cc
OBJECTS_TEST16 = $(SOURCES_TEST16:.cc=.o)

SOURCES_TEST17 = test17.cc
OBJECTS_TEST17 = $(SOURCES_TEST17:.cc=.o)

SOURCES_TEST18 = test18.cc
OBJECTS_TEST18 = $(SOURCES_TEST18:.cc=.o)

SOURCES_TEST19 = test19.cc
OBJECTS_TEST19 = $(SOURCES_TEST19:.cc=.o)

SOURCES_TEST20 = test20.cc
OBJECTS_TEST20 = $(SOURCES_TEST20:.cc=.o)

test0:	${OBJECTS_TEST0}
	$(CXX) -o test0 $(CPPFLAGS) $(OBJECTS_TEST0) $(LDFLAGS)

test1:	${OBJECTS_TEST1}
	$(CXX) -o test1 $(CPPFLAGS) $(OBJECTS_TEST1) $(LDFLAGS)

test2:	${OBJECTS_TEST2}
	$(CXX) -o test2 $(CPPFLAGS) $(OBJECTS_TEST2) $(LDFLAGS)

test3:	${OBJECTS_TEST3}
	$(CXX) -o test3 $(CPPFLAGS) $(OBJECTS_TEST3) $(LDFLAGS)

test4:	${OBJECTS_TEST4}
	$(CXX) -o test4 $(CPPFLAGS) $(OBJECTS_TEST4) $(LDFLAGS)

test5:	${OBJECTS_TEST5}
	$(CXX) -o test5 $(CPPFLAGS) $(OBJECTS_TEST5) $(LDFLAGS)

test6:	${OBJECTS_TEST6}
	$(CXX) -o test6 $(CPPFLAGS) $(OBJECTS_TEST6) $(LDFLAGS)

test7:	${OBJECTS_TEST7}
	$(CXX) -o test7 $(CPPFLAGS) $(OBJECTS_TEST7) $(LDFLAGS)

test8:	${OBJECTS_TEST8}
	$(CXX) -o test8 $(CPPFLAGS) $(OBJECTS_TEST8) $(LDFLAGS)

test9:	${OBJECTS_TEST9}
	$(CXX) -o test9 $(CPPFLAGS) $(OBJECTS_TEST9) $(LDFLAGS)

test10:	${OBJECTS_TEST10}
	$(CXX) -o test10 $(CPPFLAGS) $(OBJECTS_TEST10) $(LDFLAGS)

test11:	${OBJECTS_TEST11}
	$(CXX) -o test11 $(CPPFLAGS) $(OBJECTS_TEST11) $(LDFLAGS)

test12:	${OBJECTS_TEST12}
	$(CXX) -o test12 $(CPPFLAGS) $(OBJECTS_TEST12) $(LDFLAGS)

test13:	${OBJECTS_TEST13}
	$(CXX) -o test13 $(CPPFLAGS) $(OBJECTS_TEST13) $(LDFLAGS)

test14:	${OBJECTS_TEST14}
	$(CXX) -o test14 $(CPPFLAGS) $(OBJECTS_TEST14) $(LDFLAGS)

test15:	${OBJECTS_TEST15}
	$(CXX) -o test15 $(CPPFLAGS) $(OBJECTS_TEST15) $(LDFLAGS)

test16:	${OBJECTS_TEST16}
	$(CXX) -o test16 $(CPPFLAGS) $(OBJECTS_TEST16) $(LDFLAGS)

test17:	${OBJECTS_TEST17}
	$(CXX) -o test17 $(CPPFLAGS) $(OBJECTS_TEST17) $(LDFLAGS)

test18:	${OBJECTS_TEST18}
	$(CXX) -o test18 $(CPPFLAGS) $(OBJECTS_TEST18) $(LDFLAGS)

test19:	${OBJECTS_TEST19}
	$(CXX) -o test19 $(CPPFLAGS) $(OBJECTS_TEST19) $(LDFLAGS)

test20:	${OBJECTS_TEST20}
	$(CXX) -o test20 $(CPPFLAGS) $(OBJECTS_TEST20) $(LDFLAGS)

clean:
	$(RM) -f *.o *.core *~ test? test?? addnode
	$(RM) -f riakproto/*.o
